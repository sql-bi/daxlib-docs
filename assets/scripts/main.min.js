const treeToggleEls=document.querySelectorAll(".tree-toggle");treeToggleEls.forEach((e=>{const t=e.closest("li");t.querySelectorAll("ul li").length>0?e.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation();let t=e.currentTarget.closest("li");t.classList.contains("expanded")||t.classList.contains("current")&&!t.classList.contains("collapsed")?(t.classList.remove("expanded"),t.classList.add("collapsed")):(t.classList.add("expanded"),t.classList.remove("collapsed"))})):t.classList.add("non-expandable")}));const treeLinks=document.querySelectorAll(".tree-link");for(let e=0;e<treeLinks.length;e++)if(treeLinks[e].href==document.location.href){treeLinks[e].scrollIntoView(!1);break}const toggleH=(e,t)=>{if(!t)return;const n=parseInt(t.tagName.substr(1));for(;t;)if((t=t.nextSibling)&&t.nodeType!=Node.TEXT_NODE){if(t.classList.contains("next-reading")||"FOOTER"==t.tagName)return;if(2==t.tagName.length&&"H"==t.tagName.substr(0,1)){if(parseInt(t.tagName.substr(1))<=n)return}e?t.removeAttribute("hidden"):t.setAttribute("hidden",!0)}};document.querySelectorAll("h2:not(.static), h3:not(.static)").forEach((e=>e.addEventListener("click",(e=>{let t=e.target;const n=t.classList.contains("collapsed");n?t.classList.remove("collapsed"):t.classList.add("collapsed"),toggleH(n,t)})))),document.querySelectorAll('input[type="checkbox"]').forEach((e=>e.removeAttribute("disabled"))),document.querySelectorAll("h2, h3, h4, h5, h6").forEach((e=>{if(e.classList.contains("noanchor"))return;const t=document.createElement("a");t.href=`#${e.id}`,t.classList.add("anchor-link","alt","icon-anchor"),e.appendChild(t)})),document.querySelectorAll("img").forEach((e=>{e.complete&&0==e.naturalHeight&&(e.classList.add("broken"),e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==")})),mediumZoom(".markdown-body img:not(.nozoom)",{margin:20,background:"rgba(0, 0, 0, 0.8)",scrollOffset:40});const tocElement=document.querySelector(".toc");if(tocElement){const e=document.querySelector(".main-content, .content-no-nav"),t=tocElement.querySelectorAll("li"),n=e.querySelectorAll("h2, h3, h4, h5, h6");t.forEach((e=>{e.addEventListener("click",(e=>{t.forEach((e=>e.classList.remove("active"))),e.currentTarget.classList.add("active")}))}));const a=()=>{if(window.location.hash){const e=window.location.hash.substring(1),t=document.getElementById(e);if(t)return t}for(const e of n){const t=e.getBoundingClientRect();if(t.top>=0&&t.top<window.innerHeight)return e}return null},s=()=>{const e=a();e&&t.forEach((t=>{if(t.classList.remove("active"),e){const n=t.querySelector("a").href.split("#")[1];e.id===n&&t.classList.add("active")}}))};e.addEventListener("scroll",(()=>s())),s()}const navElement=document.querySelector(".main-nav");if(navElement){const e="nav-status";let t=JSON.parse(sessionStorage.getItem(e));t||(t={expanded:[],scroll:0}),t.expanded.forEach((e=>{let t=document.getElementById(e);t&&t.classList.add("expanded")})),t.scroll&&(navElement.scrollTop=parseInt(t.scroll,10)),window.addEventListener("beforeunload",(()=>{let t=[];navElement.querySelectorAll(".expanded").forEach((e=>t.push(e.id))),sessionStorage.setItem(e,JSON.stringify({scroll:navElement.scrollTop,expanded:t}))}))}if(navElement){const e="panels-sizes",t=300/document.body.clientWidth*100,n=[t,100-t];let a=JSON.parse(localStorage.getItem(e));a||(a=n);const s=document.querySelector(".burger");a[0]<10&&s.classList.add("collapsed");try{let t=Split([".main-nav",".main-content"],{sizes:a,minSize:[0,450],gutterSize:6,direction:"horizontal",snapOffset:70,cursor:"ew-resize",onDragEnd:function(t){localStorage.setItem(e,JSON.stringify(t)),s.classList.toggle("collapsed",t[0]<10)}});s.addEventListener("click",(a=>{if(a.preventDefault(),t){let a=t.getSizes()[0]<10?n:[0,100];s.classList.toggle("collapsed",a[0]<10),t.setSizes(a),localStorage.setItem(e,JSON.stringify(a))}}))}catch(e){}}class Theme{theme;ctrl;onChangeCallbacks=[];get current(){return"system"==this.theme?this.getActualTheme():this.theme}get isDark(){return"dark"==this.current}get isLight(){return"light"==this.current}constructor(){this.theme=localStorage.getItem("theme")||"system",window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(()=>this.apply(this.theme))),this.ctrl=document.querySelector(".change-theme"),this.ctrl.addEventListener("click",(e=>{e.preventDefault(),this.change("light"==this.theme?"dark":"dark"==this.theme?"system":"light")})),this.apply(this.theme)}getActualTheme(){if(!window.matchMedia)return"light";return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}onChange(e){this.onChangeCallbacks.push(e)}change(e){localStorage.setItem("theme",e),this.apply(e)}apply(e){this.theme=e,"dark"==this.theme?document.documentElement.setAttribute("data-dark",""):document.documentElement.removeAttribute("data-dark"),"light"==this.theme?document.documentElement.setAttribute("data-light",""):document.documentElement.removeAttribute("data-light"),this.ctrl.classList.remove("icon-theme-dark","icon-theme-light","icon-theme-system"),this.ctrl.classList.add("icon-theme-"+this.theme),this.onChangeCallbacks.forEach((e=>{try{e(this.current)}catch(e){}}))}}const theme=new Theme;class MermaidManager{constructor(e){this.theme=e,document.addEventListener("DOMContentLoaded",(()=>{this.renderAll({firstRun:!0}),this.theme.onChange((()=>{this.renderAll({firstRun:!1})}))}))}initMermaid(){mermaid.initialize({startOnLoad:!1,theme:this.theme.isDark?"dark":"default",securityLevel:"loose"})}initialTransform(){document.querySelectorAll("pre code.language-mermaid, pre.language-mermaid code").forEach((e=>{const t=e.closest("pre");if(!t)return;const n=e.textContent,a=document.createElement("div");a.className="mermaid",a.textContent=n,a.setAttribute("data-original-code",n),t.replaceWith(a)}))}resetDiagrams(){document.querySelectorAll(".mermaid").forEach((e=>{const t=e.getAttribute("data-original-code");t&&(e.removeAttribute("data-processed"),e.textContent=t)}))}runMermaid(){"function"==typeof mermaid.run?mermaid.run():"function"==typeof mermaid.init&&mermaid.init(void 0,".mermaid")}renderAll({firstRun:e}={firstRun:!1}){e?this.initialTransform():this.resetDiagrams(),this.initMermaid(),this.runMermaid()}}"undefined"!=typeof mermaid&&new MermaidManager(theme);